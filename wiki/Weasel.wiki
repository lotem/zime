#summary 中州韻Windows輸入法介紹頁
#labels Featured,Phase-Design

= 中州韻Windows輸入法 =

開發代號：*小狼毫／"Weasel"*

  * 研製中

----

==總體設計==

中州韻Windows輸入法邏輯上分為前端輸入法組件與後端服務進程兩部份。

  * 前端組件實現一個IME/TSF文字服務，負責在需要時啓動並連接到後端服務進程，將發生在目標編輯控件中的擊鍵動作通過管道通信發送給後端服務進程，並讀取處理結果，做出相應的繪製輸入法選詞窗口、文字上屏等動作。這部份不含輸入法的邏輯。

      * 技術要點：C++, IME/TSF框架，WTL繪製輸入法窗體，進程間通信機制，Windows鍵盤消息轉換為ibus keycode

  * 後端服務進程，接收前端的請求，直接利用ZIME核心算法庫，建立與前端相對應的Engine對象來做輸入轉換。轉換結果，可能為上屏文字、更新預編輯串、候選詞列表等消息，通過IPC模組傳回前端。

      * 技術要點：Python；以Windows消息+共享內存實現IPC通信，制定通信協議（文本形式），ibus數據類型（Text、Attribute）簡單的重寫

----